"use strict";exports.id=787,exports.ids=[787],exports.modules={8787:(e,t,n)=>{n.d(t,{getDefaultRoleAssumer:()=>un,getDefaultRoleAssumerWithWebIdentity:()=>pn});var s=n(9389),i=n(1208),o=n(9146);const r={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class a extends o.e{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}class c extends a{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,c.prototype)}}class d extends a{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,d.prototype)}}class l extends a{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,l.prototype)}}class u extends a{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,u.prototype)}}class p extends a{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,p.prototype)}}class g extends a{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,g.prototype)}}class h extends a{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,h.prototype)}}class m extends a{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,m.prototype)}}const f=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:o.d}}),y=e=>({...e,...e.Credentials&&{Credentials:f(e.Credentials)}}),w=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:o.d}}),P=e=>({...e,...e.Credentials&&{Credentials:f(e.Credentials)}});var b=n(5469),v=n(5479);const S=async(e,t)=>{const n=oe;let s;return s=Ue({...z(e,t),[ae]:de,[Ne]:re}),ie(t,n,"/",void 0,s)},E=async(e,t)=>{const n=oe;let s;return s=Ue({...W(e,t),[ae]:pe,[Ne]:re}),ie(t,n,"/",void 0,s)},I=async(e,t)=>{if(e.statusCode>=300)return x(e,t);const n=await(0,b.b)(e.body,t);let s={};return s=V(n.AssumeRoleResult,t),{$metadata:ne(e),...s}},A=async(e,t)=>{if(e.statusCode>=300)return x(e,t);const n=await(0,b.b)(e.body,t);let s={};return s=G(n.AssumeRoleWithWebIdentityResult,t),{$metadata:ne(e),...s}},x=async(e,t)=>{const n={...e,body:await(0,b.c)(e.body,t)},s=Le(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await C(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await T(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await O(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await j(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await k(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await $(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await R(n,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await D(n,t);default:const i=n.body;return se({output:e,parsedBody:i.Error,errorCode:s})}},C=async(e,t)=>{const n=e.body,s=_(n.Error,t),i=new c({$metadata:ne(e),...s});return(0,o.i)(i,n)},R=async(e,t)=>{const n=e.body,s=J(n.Error,t),i=new h({$metadata:ne(e),...s});return(0,o.i)(i,n)},k=async(e,t)=>{const n=e.body,s=Q(n.Error,t),i=new p({$metadata:ne(e),...s});return(0,o.i)(i,n)},D=async(e,t)=>{const n=e.body,s=X(n.Error,t),i=new m({$metadata:ne(e),...s});return(0,o.i)(i,n)},$=async(e,t)=>{const n=e.body,s=Y(n.Error,t),i=new g({$metadata:ne(e),...s});return(0,o.i)(i,n)},T=async(e,t)=>{const n=e.body,s=Z(n.Error,t),i=new d({$metadata:ne(e),...s});return(0,o.i)(i,n)},O=async(e,t)=>{const n=e.body,s=ee(n.Error,t),i=new l({$metadata:ne(e),...s});return(0,o.i)(i,n)},j=async(e,t)=>{const n=e.body,s=te(n.Error,t),i=new u({$metadata:ne(e),...s});return(0,o.i)(i,n)},z=(e,t)=>{const n={};if(null!=e[Re]&&(n[Re]=e[Re]),null!=e[ke]&&(n[ke]=e[ke]),null!=e[Se]){const s=K(e[Se],t);0===e[Se]?.length&&(n.PolicyArns=[]),Object.entries(s).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}if(null!=e[ve]&&(n[ve]=e[ve]),null!=e[ye]&&(n[ye]=e[ye]),null!=e[ze]){const s=U(e[ze],t);0===e[ze]?.length&&(n.Tags=[]),Object.entries(s).forEach((([e,t])=>{n[`Tags.${e}`]=t}))}if(null!=e[Ke]){const s=M(e[Ke],t);0===e[Ke]?.length&&(n.TransitiveTagKeys=[]),Object.entries(s).forEach((([e,t])=>{n[`TransitiveTagKeys.${e}`]=t}))}if(null!=e[Pe]&&(n[Pe]=e[Pe]),null!=e[Oe]&&(n[Oe]=e[Oe]),null!=e[We]&&(n[We]=e[We]),null!=e[Te]&&(n[Te]=e[Te]),null!=e[Ie]){const s=F(e[Ie],t);0===e[Ie]?.length&&(n.ProvidedContexts=[]),Object.entries(s).forEach((([e,t])=>{n[`ProvidedContexts.${e}`]=t}))}return n},W=(e,t)=>{const n={};if(null!=e[Re]&&(n[Re]=e[Re]),null!=e[ke]&&(n[ke]=e[ke]),null!=e[Fe]&&(n[Fe]=e[Fe]),null!=e[Ae]&&(n[Ae]=e[Ae]),null!=e[Se]){const s=K(e[Se],t);0===e[Se]?.length&&(n.PolicyArns=[]),Object.entries(s).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}return null!=e[ve]&&(n[ve]=e[ve]),null!=e[ye]&&(n[ye]=e[ye]),n},K=(e,t)=>{const n={};let s=1;for(const i of e){if(null===i)continue;const e=N(i,t);Object.entries(e).forEach((([e,t])=>{n[`member.${s}.${e}`]=t})),s++}return n},N=(e,t)=>{const n={};return null!=e[He]&&(n[He]=e[He]),n},q=(e,t)=>{const n={};return null!=e[Ee]&&(n[Ee]=e[Ee]),null!=e[fe]&&(n[fe]=e[fe]),n},F=(e,t)=>{const n={};let s=1;for(const t of e){if(null===t)continue;const e=q(t);Object.entries(e).forEach((([e,t])=>{n[`member.${s}.${e}`]=t})),s++}return n},H=(e,t)=>{const n={};return null!=e[be]&&(n[be]=e[be]),null!=e[qe]&&(n[qe]=e[qe]),n},M=(e,t)=>{const n={};let s=1;for(const t of e)null!==t&&(n[`member.${s}`]=t,s++);return n},U=(e,t)=>{const n={};let s=1;for(const t of e){if(null===t)continue;const e=H(t);Object.entries(e).forEach((([e,t])=>{n[`member.${s}.${e}`]=t})),s++}return n},L=(e,t)=>{const n={};return null!=e[le]&&(n[le]=(0,o.n)(e[le])),null!=e[ge]&&(n[ge]=(0,o.n)(e[ge])),n},V=(e,t)=>{const n={};return null!=e[me]&&(n[me]=B(e[me],t)),null!=e[ue]&&(n[ue]=L(e[ue])),null!=e[xe]&&(n[xe]=(0,o.z)(e[xe])),null!=e[Te]&&(n[Te]=(0,o.n)(e[Te])),n},G=(e,t)=>{const n={};return null!=e[me]&&(n[me]=B(e[me],t)),null!=e[$e]&&(n[$e]=(0,o.n)(e[$e])),null!=e[ue]&&(n[ue]=L(e[ue])),null!=e[xe]&&(n[xe]=(0,o.z)(e[xe])),null!=e[Ce]&&(n[Ce]=(0,o.n)(e[Ce])),null!=e[he]&&(n[he]=(0,o.n)(e[he])),null!=e[Te]&&(n[Te]=(0,o.n)(e[Te])),n},B=(e,t)=>{const n={};return null!=e[ce]&&(n[ce]=(0,o.n)(e[ce])),null!=e[De]&&(n[De]=(0,o.n)(e[De])),null!=e[je]&&(n[je]=(0,o.n)(e[je])),null!=e[we]&&(n[we]=(0,o.l)((0,o.u)(e[we]))),n},_=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},J=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},Q=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},X=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},Y=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},Z=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},ee=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},te=(e,t)=>{const n={};return null!=e[Me]&&(n[Me]=(0,o.n)(e[Me])),n},ne=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),se=(0,o.B)(a),ie=async(e,t,n,s,i)=>{const{hostname:o,protocol:r="https",port:a,path:c}=await e.endpoint(),d={protocol:r,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return void 0!==s&&(d.hostname=s),void 0!==i&&(d.body=i),new v.a(d)},oe={"content-type":"application/x-www-form-urlencoded"},re="2011-06-15",ae="Action",ce="AccessKeyId",de="AssumeRole",le="AssumedRoleId",ue="AssumedRoleUser",pe="AssumeRoleWithWebIdentity",ge="Arn",he="Audience",me="Credentials",fe="ContextAssertion",ye="DurationSeconds",we="Expiration",Pe="ExternalId",be="Key",ve="Policy",Se="PolicyArns",Ee="ProviderArn",Ie="ProvidedContexts",Ae="ProviderId",xe="PackedPolicySize",Ce="Provider",Re="RoleArn",ke="RoleSessionName",De="SecretAccessKey",$e="SubjectFromWebIdentityToken",Te="SourceIdentity",Oe="SerialNumber",je="SessionToken",ze="Tags",We="TokenCode",Ke="TransitiveTagKeys",Ne="Version",qe="Value",Fe="WebIdentityToken",He="arn",Me="message",Ue=e=>Object.entries(e).map((([e,t])=>(0,o.o)(e)+"="+(0,o.o)(t))).join("&"),Le=(e,t)=>void 0!==t.Error?.Code?t.Error.Code:404==e.statusCode?"NotFound":void 0;class Ve extends(o.b.classBuilder().ep({...r}).m((function(e,t,n,o){return[(0,i.a)(n,this.serialize,this.deserialize),(0,s.b)(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,y).ser(S).de(I).build()){}class Ge extends(o.b.classBuilder().ep({...r}).m((function(e,t,n,o){return[(0,i.a)(n,this.serialize,this.deserialize),(0,s.b)(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(w,P).ser(E).de(A).build()){}const Be="us-east-1",_e=e=>{if("string"==typeof e?.Arn){const t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},Je=async(e,t,n)=>{const s="function"==typeof e?await e():e,i="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${i} (parent client)`,`${Be} (STS default)`),s??i??Be};var Qe=n(1095),Xe=n(9359),Ye=n(8377),Ze=n(499),et=n(7122),tt=n(7503),nt=n(649),st=n(1018),it=n(5669),ot=n(7135);const rt=async(e,t,n)=>({operation:(0,ot.a)(t).operation,region:await(0,ot.b)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),at=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":case"AssumeRoleWithWebIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t};var ct=n(5122),dt=n(6228),lt=n(8257),ut=n(3058),pt=n(1701),gt=n(9987),ht=n(3928),mt=n(7809),ft=n(3323),yt=n(2641),wt=n(4572),Pt=n(3197),bt=n(6652),vt=n(3875);const St="required",Et="type",It="fn",At="argv",xt="ref",Ct=!1,Rt=!0,kt="booleanEquals",Dt="stringEquals",$t="sigv4",Tt="us-east-1",Ot="endpoint",jt="https://sts.{Region}.{PartitionResult#dnsSuffix}",zt="tree",Wt="error",Kt="getAttr",Nt={[St]:!1,[Et]:"String"},qt={[St]:!0,default:!1,[Et]:"Boolean"},Ft={[xt]:"Endpoint"},Ht={[It]:"isSet",[At]:[{[xt]:"Region"}]},Mt={[xt]:"Region"},Ut={[It]:"aws.partition",[At]:[Mt],assign:"PartitionResult"},Lt={[xt]:"UseFIPS"},Vt={[xt]:"UseDualStack"},Gt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:$t,signingName:"sts",signingRegion:Tt}]},headers:{}},Bt={},_t={conditions:[{[It]:Dt,[At]:[Mt,"aws-global"]}],[Ot]:Gt,[Et]:Ot},Jt={[It]:kt,[At]:[Lt,!0]},Qt={[It]:kt,[At]:[Vt,!0]},Xt={[It]:Kt,[At]:[{[xt]:"PartitionResult"},"supportsFIPS"]},Yt={[xt]:"PartitionResult"},Zt={[It]:kt,[At]:[!0,{[It]:Kt,[At]:[Yt,"supportsDualStack"]}]},en=[{[It]:"isSet",[At]:[Ft]}],tn=[Jt],nn=[Qt],sn={version:"1.0",parameters:{Region:Nt,UseDualStack:qt,UseFIPS:qt,Endpoint:Nt,UseGlobalEndpoint:qt},rules:[{conditions:[{[It]:kt,[At]:[{[xt]:"UseGlobalEndpoint"},Rt]},{[It]:"not",[At]:en},Ht,Ut,{[It]:kt,[At]:[Lt,Ct]},{[It]:kt,[At]:[Vt,Ct]}],rules:[{conditions:[{[It]:Dt,[At]:[Mt,"ap-northeast-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"ap-south-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"ap-southeast-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"ap-southeast-2"]}],endpoint:Gt,[Et]:Ot},_t,{conditions:[{[It]:Dt,[At]:[Mt,"ca-central-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"eu-central-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"eu-north-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"eu-west-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"eu-west-2"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"eu-west-3"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"sa-east-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,Tt]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"us-east-2"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"us-west-1"]}],endpoint:Gt,[Et]:Ot},{conditions:[{[It]:Dt,[At]:[Mt,"us-west-2"]}],endpoint:Gt,[Et]:Ot},{endpoint:{url:jt,properties:{authSchemes:[{name:$t,signingName:"sts",signingRegion:"{Region}"}]},headers:Bt},[Et]:Ot}],[Et]:zt},{conditions:en,rules:[{conditions:tn,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[Et]:Wt},{conditions:nn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[Et]:Wt},{endpoint:{url:Ft,properties:Bt,headers:Bt},[Et]:Ot}],[Et]:zt},{conditions:[Ht],rules:[{conditions:[Ut],rules:[{conditions:[Jt,Qt],rules:[{conditions:[{[It]:kt,[At]:[Rt,Xt]},Zt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Bt,headers:Bt},[Et]:Ot}],[Et]:zt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[Et]:Wt}],[Et]:zt},{conditions:tn,rules:[{conditions:[{[It]:kt,[At]:[Xt,Rt]}],rules:[{conditions:[{[It]:Dt,[At]:[{[It]:Kt,[At]:[Yt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Bt,headers:Bt},[Et]:Ot},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Bt,headers:Bt},[Et]:Ot}],[Et]:zt},{error:"FIPS is enabled but this partition does not support FIPS",[Et]:Wt}],[Et]:zt},{conditions:nn,rules:[{conditions:[Zt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Bt,headers:Bt},[Et]:Ot}],[Et]:zt},{error:"DualStack is enabled but this partition does not support DualStack",[Et]:Wt}],[Et]:zt},_t,{endpoint:{url:jt,properties:Bt,headers:Bt},[Et]:Ot}],[Et]:zt}],[Et]:zt},{error:"Invalid Configuration: Missing Region",[Et]:Wt}]},on=(e,t={})=>(0,vt.d)(sn,{endpointParams:e,logger:t.logger});vt.a.aws=bt.a;var rn=n(4321);var an=n(4547);const cn=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){s=e},credentials:()=>s}};class dn extends o.a{constructor(...[e]){const t=(n=(e=>{(0,o.j)(process.version);const t=(0,rn.a)(e),n=()=>t().then(o.r),s=(e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??wt.a,base64Encoder:e?.base64Encoder??wt.b,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??on,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??at,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new dt.a},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new tt.b}],logger:e?.logger??new o.c,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??yt.a,utf8Decoder:e?.utf8Decoder??Pt.a,utf8Encoder:e?.utf8Encoder??Pt.c}))(e);return(0,ct.a)(process.version),{...s,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??mt.a,credentialDefaultProvider:e?.credentialDefaultProvider??lt.a,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,ut.a)({serviceId:s.serviceId,clientVersion:"3.621.0"}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await(0,lt.a)(e?.__config||{})()),signer:new dt.a},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new tt.b}],maxAttempts:e?.maxAttempts??(0,gt.a)(st.a),region:e?.region??(0,gt.a)(et.b,et.a),requestHandler:ht.a.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,gt.a)({...st.b,default:async()=>(await n()).retryMode||ft.d}),sha256:e?.sha256??pt.a.bind(null,"sha256"),streamCollector:e?.streamCollector??ht.b,useDualstackEndpoint:e?.useDualstackEndpoint??(0,gt.a)(et.c),useFipsEndpoint:e?.useFipsEndpoint??(0,gt.a)(et.d)}})(e||{}),{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,defaultSigningName:"sts"});var n;const i=(0,et.e)(t),r=(0,s.c)(i),a=(0,Qe.b)(r),c=(0,Ze.b)(a),d=((e,t)=>{const n={...(0,an.a)(e),...(0,o.p)(e),...(0,v.c)(e),...cn(e)};return t.forEach((e=>e.configure(n))),{...e,...(0,an.b)(n),...(0,o.w)(n),...(0,v.d)(n),...(s=n,{httpAuthSchemes:s.httpAuthSchemes(),httpAuthSchemeProvider:s.httpAuthSchemeProvider(),credentials:s.credentials()})};var s})((e=>{const t=(n=e,{...n,stsClientCtor:dn});var n;return{...(0,it.a)(t)}})((0,st.d)(c)),e?.extensions||[]);super(d),this.config=d,this.middlewareStack.use((0,Qe.a)(this.config)),this.middlewareStack.use((0,Xe.a)(this.config)),this.middlewareStack.use((0,Ye.a)(this.config)),this.middlewareStack.use((0,Ze.a)(this.config)),this.middlewareStack.use((0,st.c)(this.config)),this.middlewareStack.use((0,nt.a)(this.config)),this.middlewareStack.use((0,tt.d)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,tt.e)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return rt}getIdentityProviderConfigProvider(){return async e=>new tt.a({"aws.auth#sigv4":e.credentials})}}const ln=(e,t)=>t?class extends e{constructor(e){super(e);for(const e of t)this.middlewareStack.use(e)}}:e,un=(e={},t)=>((e,t)=>{let n,s;return async(i,o)=>{if(s=i,!n){const{logger:i=e?.parentClientConfig?.logger,region:o,requestHandler:r=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a}=e,c=await Je(o,e?.parentClientConfig?.region,a);n=new t({credentialDefaultProvider:()=>async()=>s,region:c,requestHandler:r,logger:i})}const{Credentials:r,AssumedRoleUser:a}=await n.send(new Ve(o));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const c=_e(a);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...c&&{accountId:c}}}})(e,ln(dn,t)),pn=(e={},t)=>((e,t)=>{let n;return async s=>{if(!n){const{logger:s=e?.parentClientConfig?.logger,region:i,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:r}=e,a=await Je(i,e?.parentClientConfig?.region,r);n=new t({region:a,requestHandler:o,logger:s})}const{Credentials:i,AssumedRoleUser:o}=await n.send(new Ge(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);const r=_e(o);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...r&&{accountId:r}}}})(e,ln(dn,t))},6228:(e,t,n)=>{n.d(t,{a:()=>c});var s=n(5479);const i=e=>new Date(Date.now()+e),o=e=>s.b.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,r=(e,t)=>{const n=Date.parse(e);return((e,t)=>Math.abs(i(t).getTime()-e)>=3e5)(n,t)?n-Date.now():t},a=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t};class c{async sign(e,t,n){if(!s.a.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:o,signer:r,signingRegion:c,signingName:d}=await(async e=>{const t=a("context",e.context),n=a("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],i=a("signer",n.signer),o=await i(s),r=e?.signingRegion,c=e?.signingName;return{config:n,signer:o,signingRegion:r,signingName:c}})(n);return await r.sign(e,{signingDate:i(o.systemClockOffset),signingRegion:c,signingService:d})}errorHandler(e){return t=>{const n=t.ServerTime??o(t.$response);if(n){const s=a("config",e.config),i=s.systemClockOffset;s.systemClockOffset=r(n,s.systemClockOffset),s.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const n=o(e);if(n){const e=a("config",t.config);e.systemClockOffset=r(n,e.systemClockOffset)}}}},5669:(e,t,n)=>{n.d(t,{a:()=>o});var s=n(7503),i=n(5138);const o=e=>{let t;e.credentials&&(t=(0,s.g)(e.credentials,s.f,s.c)),t||(t=e.credentialDefaultProvider?(0,s.h)(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw new Error("`credentials` is missing")});const{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:r}=e;let a;return a=e.signer?(0,s.h)(e.signer):e.regionInfoProvider?()=>(0,s.h)(e.region)().then((async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t])).then((([s,o])=>{const{signingRegion:a,signingService:c}=s;e.signingRegion=e.signingRegion||a||o,e.signingName=e.signingName||c||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n};return new(e.signerConstructor||i.a)(d)})):async o=>{const a=(o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await(0,s.h)(e.region)(),properties:{}},o)).signingRegion,c=o.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:r,uriEscapePath:n};return new(e.signerConstructor||i.a)(d)},{...e,systemClockOffset:o,signingEscapePath:n,credentials:t,signer:a}}}};